<section class="wholesale-wrapper">
  {% if section.settings.banner_img != blank %}
  <div class="wholesale-banner">
    <img src="{{ section.settings.banner_img | img_url:'master' }}" alt="{{ section.settings.banner_img.alt | escape }}">
  </div>
  {% endif %}
  <div class="wholesale-container">
    <div class="wholesale-title">
      <h2>{{ page.title }}</h2>
      {% if section.settings.page_description != blank %}
      {{ section.settings.page_description }}
      {% endif %}
    </div>
    <div class="wholesale-form  cs-custom-form s-351362289">
      {%- assign formId = 'wholesale_ContactForm' -%}
      <form action="https://ecf.cirkleinc.com/forms/save?shop=agrariaome.myshopify.com" class="contact-form ui-sortable ui wholesale_ContactForm" id="1f646dd1dcf6c43a3518e66d4c8b6fc9" method="post" onsubmit="return false;">
        <p id="msg" align="center"></p>
        <div class="form-group half-field">
          <label for="contactfirstname">{{ 'form_field.form.fname' | t }}*</label>
          <input type="text" name="contact_first_name" id="contactfirstname" placeholder="" title="Contact First Name*" class="">
        </div>
        <div class="form-group half-field">
          <label for="contactlastname">{{ 'form_field.form.lname' | t }}*</label>
          <input type="text" placeholder="" name="contact_last_name" id="contactlastname" title="Contact Last Name*" class="">
        </div>
        <div class="form-group half-field">
          <label for="email">{{ 'form_field.form.email' | t }}*</label>
          <input type="email" name="email" id="email" data-email_field="true" placeholder="" title="Email" class="">
        </div>
        <div class="form-group half-field">
          <label for="confirm_email">{{ 'form_field.form.cemail' | t }}*</label>
          <input type="email" id="confirm_email" name="confirm Mail" class="form-control" />
        </div>
        <div class="form-group half-field">
          <label for="retailername">{{ 'form_field.form.retailer_name' | t }}*</label>
          <input type="text" name="retailer_name" id="retailername" placeholder="" title="Retailer Name*" class="">
        </div>
        <div class="form-group half-field">
          <label for="website">{{ 'form_field.form.Website' | t }}</label>
          <input type="text" placeholder="" name="website" id="website" title="Website" class="">
        </div>
        <div class="form-group full-field">
          <label for="address">{{ 'form_field.form.address' | t }}*</label>
          <input type="text" placeholder="" name="address" id="address" title="Address*" class="">
        </div>
        <div class="form-fields-group full-field">
          <div class="form-group cm-city">
            <label for="city">{{ 'form_field.form.city' | t }}*</label>
            <input type="text" placeholder="" name="city" id="city" title="City*" class="">
          </div>
          <div class="form-group cm-state">
            <label for="state">{{ 'form_field.form.state' | t }}*</label>
            <input type="text" placeholder="" name="state" id="state" title="State*" class="">
          </div>
          <div class="form-group cm-zip">
            <label for="zip">{{ 'form_field.form.zip' | t }}*</label>
            <input type="text" placeholder="" name="zip" id="zip" title="Zip*" class="">
          </div>
        </div>
        <div class="form-group full-field">
          <label for="storedescription">{{ 'form_field.form.store_description' | t }}*</label>
          <textarea rows="3" name="store_description" id="storedescription" placeholder="" title="Store Description*" class=""></textarea>
        </div>
        <div class="form-group full-field">
          <label for="otherbrandsisell">{{ 'form_field.form.brands_sell' | t }}</label>
          <input type="text" placeholder="" name="other_brands_i_sell" id="otherbrandsisell" title="Other brands I sell" class="">
        </div>
        <div class="form-group full-field">
          <label for="howdidyouhearaboutagraria">{{ 'form_field.form.about_agraria' | t }}*</label>
          <input type="text" placeholder="" name="how_did_you_hear_about_agraria" id="howdidyouhearaboutagraria" title="How did you hear about Agraria?*" class="">
        </div>
        <div class="form-group full-field">
          <div class="recaptcha_wrap" id="aef607df-05da-411a-ac5d-20a5b14c8812"></div>
        </div>
        <div class="form-submit">
          <div class="form-group full-field">
            <strong>*PLEASE NOTE</strong> — We do not allow any re-selling on 3rd party platforms such as Amazon, Etsy, Ebay, etc. Any e-commerce request must include selling site URL.
          </div>
          <button type="submit" class="wholesale-btn">
            {{ 'form_field.form.submit' | t }}
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
<script src="https://ecf.cirkleinc.com/public/frontend/js/form-builder-helper.js"></script> <script src="https://www.google.com/recaptcha/api.js"></script>
<script>
  $(document).ready(function(){       
    
    $('.wholesale_ContactForm').submit(function(){
      var form = $(this);

      var msgWrap = form.find("#msg");
      msgWrap.html('');
      msgWrap.attr('style','display: none');
      msgWrap.removeClass('success-msg');
      msgWrap.removeClass('error-msg');
      let form_id = jQuery(form).attr('id');
      let action = jQuery(form).attr('action');
      var button = jQuery(form).find('[type="submit"]');
      let formData = new FormData(jQuery('#' + form_id)[0]);
      formData.append('form_id', form_id);
      if (typeof csFormBeforeSend !== 'undefined' && typeof csFormBeforeSend === 'function') {
        if (csFormBeforeSend(form_id, jQuery(form).serialize()) === false) {
          msgWrap.addClass('error-msg');
          return false;
        }
      }

      
      var x = true;
      var nm = form.find('#contactfirstname');
      var lm = form.find('#contactlastname');
      var em = form.find('#email');
      var cem = form.find('#confirm_email');
      var rtn = form.find('#retailername');
      var add = form.find('#address');
      var ct = form.find('#city');
      var st = form.find('#state');
      var zp = form.find('#zip');
      var desc = form.find('#storedescription');
      var msg = form.find('#howdidyouhearaboutagraria');
      form.find('.error_msg').remove();
      var err_msg = 'This is a required field.';
      if(nm.val().trim() == ''){
        $(nm).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(nm).parent().addClass('haserror');
        x = false;
      }else{        
        $(nm).parent().removeClass('haserror');
      }

      if(lm.val().trim() == ''){
        $(lm).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(lm).parent().addClass('haserror');
        x = false;
      }else{        
        $(lm).parent().removeClass('haserror');
      } 
            
      var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
      if(em.val().trim() == '' || !regex.test(em.val())) {
        $(em).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(em).parent().addClass('haserror');
        x = false;
      } else{
        $(em).parent().removeClass('haserror');
      }
      
      
      if(cem.val().trim() == '' || !regex.test(cem.val())) {
        $(cem).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(cem).parent().addClass('haserror');
        x = false;
      } else{        
        if(em.val().trim() != cem.val().trim()) {
          $(cem).parent().append('<span class="error_msg">Please enter the same value again.</span>');        
          $(cem).parent().addClass('haserror');
          x = false;
        } else{
          $(cem).parent().removeClass('haserror');
        }
      }
          
      
      if(rtn.val().trim() == ''){
        $(rtn).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(rtn).parent().addClass('haserror');
        x = false;
      }else{        
        $(rtn).parent().removeClass('haserror');
      } 
      
      if(add.val().trim() == ''){
        $(add).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(add).parent().addClass('haserror');
        x = false;
      }else{        
        $(add).parent().removeClass('haserror');
      } 
      
      if(ct.val().trim() == ''){
        $(ct).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(ct).parent().addClass('haserror');
        x = false;
      }else{        
        $(ct).parent().removeClass('haserror');
      } 
      
      if(st.val().trim() == ''){
        $(st).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(st).parent().addClass('haserror');
        x = false;
      }else{        
        $(st).parent().removeClass('haserror');
      } 
      
      if(zp.val().trim() == ''){
        $(zp).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(zp).parent().addClass('haserror');
        x = false;
      }else{        
        $(zp).parent().removeClass('haserror');
      } 
      
      if(desc.val().trim() == ''){
        $(desc).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(desc).parent().addClass('haserror');
        x = false;
      }else{        
        $(desc).parent().removeClass('haserror');
      } 
      
      if(msg.val().trim() == ''){
        $(msg).parent().append('<span class="error_msg">'+ err_msg +'</span>');        
        $(msg).parent().addClass('haserror');
        x = false;
      }else{        
        $(msg).parent().removeClass('haserror');
      } 
      
      if( x == false){
        $('.haserror:eq(0) input').trigger('focus');
        return false;        
      }

      jQuery(form).find("button[type='submit']").attr('disabled', 'disabled');
      jQuery.ajax({
        url: action,
        type: 'POST',
        dataType: "JSON",
        data: formData,
        processData: false,
        contentType: false,
        crossDomain: true,
        beforeSend: function (xhr) {
          //xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
          //xhr.setRequestHeader("Access-Control-Allow-Methods", "*");
          //           button.parent().append('<svg id="loadingImg" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" width="30px" height="30px" viewBox="0 0 128 128" xml:space="preserve"><rect x="0" y="0" width="100%" height="100%" fill="#FFFFFF" /><g><path fill="#000000" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z"/><animateTransform attributeName="transform" type="rotate" from="0 64 64" to="360 64 64" dur="800ms" repeatCount="indefinite"></animateTransform></g></svg>');
        },
        success: function (data) {
          jQuery(form).find("button[type='submit']").removeAttr('disabled');
          if(!msgWrap.length)
            msgWrap.insertAfter(jQuery(form).find('button[type="submit"]'));

          if (data.status === 'success') {
            if (typeof csFormSuccessCallback !== 'undefined' && typeof csFormSuccessCallback === 'function') {
              if (csFormSuccessCallback(form_id, data) === false) {
                return false;
              }
            }
            jQuery('#' + form_id)[0].reset();
            if (jQuery(form).find(".g-recaptcha").length > 0 && jQuery(form).find(".g-recaptcha").attr('data-sitekey').length > 0 && grecaptcha !== undefined) {
              grecaptcha.reset();
            }
            if (data.url !== undefined && data.url !== null && data.url !== '') {
              // window.open(data.url, "_blank");
              location.href = data.url;
            } else {
              msgWrap.html(data.message);
              msgWrap.attr('style','display: block');
            }
            msgWrap.addClass('success-msg');
            setTimeout(function () {
              if (jQuery("#viewFormModal").length > 0) {
                jQuery("#viewFormModal").modal('hide');
              }
            }, 3000);
          }
          else {
            msgWrap.html(data.message);
            msgWrap.addClass('error-msg');
            msgWrap.attr('style','display: block');
          }
          setTimeout(function () {
            msgWrap.html('');
            msgWrap.attr('style','display: none');
            msgWrap.removeClass('success-msg');
            msgWrap.removeClass('error-msg');
          }, 10000);
        },
        error: function (error) {
          console.log(error);
        }
      }).done(function(){
        jQuery('#loadingImg').remove();
      });
      
    });
  });
</script>

{% schema %}
  {
    "name": "Wholesale",
    "settings": [
	{
      "type": "image_picker",
      "id": "banner_img",
      "label": "Banner Image"		
    },
    {
      "type": "richtext",
      "id": "page_description",
      "label": "Page Description"		
    }
	]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
